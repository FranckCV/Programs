{% extends "maestra_general.html" %}

{% block titulo %}
Homepage
{% endblock %}

{% block estilos %}
<link rel="stylesheet" href="/static/css/general_style.css">
{% endblock %}

{% block contenido %}

<div class="dashboard">

    <div class="controls">
        <button id="addEntity">Añadir Entidad</button>
        <button id="saveAsImage">Imagen</button>
        <button id="export">Exporta</button>
    </div>

    <canvas id="diagramCanvas" width="800" height="600" style="border:1px solid black;"></canvas>

</div>

<!-- <div id="canvas-container">
        <canvas id="canvas"></canvas>
    </div> -->

{% endblock %}

{% block scripts %}
<script src="https://unpkg.com/konva@9/konva.min.js"></script>
<!-- <script src="/static/js/dashboard.js"></script> -->
 
<!-- <script>

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Ajustar tamaño dinámico del lienzo
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;

        // Dibujar una tabla (placeholder)
        ctx.fillStyle = '#4CAF50';
        ctx.fillRect(100, 100, 150, 80);
        ctx.fillStyle = '#fff';
        ctx.font = '16px Arial';
        ctx.fillText('Tabla: Usuarios', 110, 140);




        // Conexión al servidor
        const socket = io.connect('http://127.0.0.1:8000/dashboard');

        // Enviar actualizaciones al servidor
        function sendUpdate(data) {
            socket.emit('update_canvas', data);
        }

        // Escuchar cambios desde otros usuarios
        socket.on('update_canvas', (data) => {
        console.log('Actualización recibida:', data);
        // Actualizar el lienzo según los datos recibidos
        });



        

        canvas.addEventListener('mousedown', (e) => {
            // Coordenadas del clic en el lienzo
            const x = e.offsetX;
            const y = e.offsetY;

            // Dibujar un rectángulo en las coordenadas
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(x, y, 100, 50);
            ctx.fillStyle = '#fff';
            ctx.fillText('Nueva Tabla', x + 10, y + 30);

            // Enviar cambios al servidor
            sendUpdate({ x, y });
        });

    </script> -->
{% endblock %}